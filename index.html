<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cia Special Page â¤ï¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Pacifico&display=swap');
        body { font-family: 'Poppins', sans-serif; }
        .font-hand { font-family: 'Pacifico', cursive; }
        
        /* Utility Classes */
        .hidden-step { display: none !important; }
        .fade-in { animation: fadeIn 0.6s ease-out; }
        .pop-in { animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        
        .float-heart {
            position: fixed;
            color: #ec4899;
            animation: floatUp 4s linear forwards;
            font-size: 2rem;
            z-index: 50;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        @keyframes floatUp { 
            0% { transform: translateY(100vh) scale(0.5); opacity: 1; } 
            100% { transform: translateY(-10vh) scale(1.5); opacity: 0; } 
        }
        
        input[type="date"]::-webkit-calendar-picker-indicator { cursor: pointer; }

        /* Kustomisasi Scrollbar agar Pink & Tipis */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #fff0f3; 
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #f472b6; 
            border-radius: 10px;
        }
    </style>
</head>
<body class="bg-rose-50 min-h-screen flex items-center justify-center relative overflow-hidden">

    <div id="userProfile" class="hidden fixed top-4 left-4 z-40 bg-white/80 backdrop-blur-sm px-4 py-2 rounded-full shadow-md border border-rose-200 flex items-center gap-3 animate__animated animate__fadeInLeft">
        <div class="bg-rose-100 p-2 rounded-full">
            <span class="text-xl">ğŸ‘©â€â¤ï¸â€ğŸ‘¨</span>
        </div>
        <div>
            <p id="dispNama" class="text-sm font-bold text-rose-600 leading-tight">User</p>
            <p id="dispLahir" class="text-xs text-gray-500">Lahir: -</p>
        </div>
    </div>

    <div id="customModal" class="hidden fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 text-center transform transition-all pop-in border-4 border-rose-100">
            <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-rose-100 mb-4">
                <span class="text-2xl">ğŸ˜º</span>
            </div>
            <h3 class="text-lg leading-6 font-bold text-gray-900 mb-2" id="modalTitle">Pesan</h3>
            <div class="mt-2">
                <p class="text-sm text-gray-500" id="modalMessage">Isi pesan disini...</p>
            </div>
            <div class="mt-6">
                <button type="button" onclick="closeModal()" class="w-full inline-flex justify-center rounded-xl border border-transparent shadow-sm px-4 py-2 bg-rose-500 text-base font-medium text-white hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 sm:text-sm transition-transform active:scale-95">
                    Oke, Paham!
                </button>
            </div>
        </div>
    </div>

    <form id="mainForm" action="https://formspree.io/f/mqedpaeq" method="POST" class="w-full h-full flex justify-center items-center">
        
        <div class="w-full max-w-lg bg-white/90 backdrop-blur-md p-6 md:p-8 rounded-3xl shadow-2xl border border-rose-100 m-4 relative z-10 transition-all duration-500 max-h-[85vh] overflow-y-auto custom-scrollbar">
            
            <div id="step1" class="step fade-in">
                <h1 class="text-3xl font-hand text-rose-500 text-center mb-6">Login Area ğŸ”</h1>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-600 mb-1">Nama Lengkap</label>
                        <input type="text" id="inputNama" class="w-full px-4 py-3 rounded-xl border border-rose-200 focus:ring-2 focus:ring-rose-400 focus:outline-none" placeholder="Masukkan nama kamu...">
                        <p class="text-xs text-rose-400 mt-1">*Harus 2 kata, huruf depan kapital (Harusnya: Sisca Frecilia. klo bukan dia kamu siapa?)</p>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-600 mb-1">Tanggal Lahir</label>
                        <input type="date" id="inputLahir" class="w-full px-4 py-3 rounded-xl border border-rose-200 focus:ring-2 focus:ring-rose-400 focus:outline-none">
                    </div>
                    <button type="button" onclick="validateStep1()" class="w-full bg-rose-400 hover:bg-rose-500 text-white font-bold py-3 rounded-xl shadow-lg transition transform active:scale-95">Masuk</button>
                </div>
                <input type="hidden" name="Final_Name" id="finalNameData">
                <input type="hidden" name="Birth_Date" id="finalBirthData">
            </div>

            <div id="step2" class="step hidden-step fade-in">
                <h2 class="text-2xl font-bold text-gray-700 mb-4 text-center">Flashback Time ğŸ•°ï¸</h2>
                
                <div id="part2Input" class="mb-6 transition-all duration-500">
                    <label class="block text-sm font-semibold text-rose-600 mb-2">Ceritain satu momen yang bikin kamu inget aku:</label>
                    <textarea id="inputMemory" name="Her_Memory" rows="4" class="w-full px-4 py-3 rounded-xl border border-rose-200 focus:ring-2 focus:ring-rose-400 bg-rose-50 focus:outline-none" placeholder="Tulis di sini ya cantik..." required></textarea>
                    
                    <button type="button" onclick="revealMyMessage()" class="mt-4 w-full bg-rose-400 hover:bg-rose-500 text-white font-bold py-2 rounded-xl shadow-md transition-all">
                        Kirim Cerita ğŸ’Œ
                    </button>
                </div>

                <div id="part2Message" class="hidden opacity-0 transform translate-y-4 transition-all duration-700">
                    <div class="bg-rose-100 p-5 rounded-xl border-l-4 border-rose-400 mb-6 text-gray-700 text-sm italic space-y-4 text-justify leading-relaxed">
                        
                        <h3 class="font-hand text-xl text-rose-600 mb-2 font-bold not-italic text-left">From Me to You:</h3>
                        
                        <p>
                            Terima kasih atas ceritanya, aku senang bacanya. Sekarang gantian aku yang cerita.
                        </p>

                        <p>
                            Jujur saat SMP aku sudah perhatiin kamu dari kejauhan, cuma dulu aku merasa gengsi. Tapi dari situ aku belajar, mungkin cara aku mempelajarinya tidak secepat orang lain, tapi aku terus mencoba untuk memahami kamu. Walau ujung-ujungnya kita sempet pisah, tapi kamu gak pernah benar-benar hilang dari pikiranku.
                        </p>

                        <p>
                            Pas hari ulang tahunku yang ke-21, aku merasa kalo itu kamu tapi aku masih sedikit ragu karena kupikir "ini gak mungkin". Dan bener aja itu kamu, aku seneng banget bisa ngobrol lagi dengan kamu. Liat kamu sekarang, dikelilingi 2 sahabat yang suportif dan melihat pencapaianmu, aku beneran bangga.
                        </p>

                        <p>
                            Soal kejadian malam ini, aku sadar kalau aku yang salah. Aku sangat egois. Aku minta maaf. HP-ku yang ke-reset membuat chat darimu hilang, tapi 3 poin penting saranmu gak aku lupain. Itu nampar aku banget buat sadar kalo aku harus berubah.
                        </p>

                        <p>
                            Aku tau aku belum sempurna, aku juga engga sepeka bahkan sepengertian yang kamu butuhkan saat ini. Tapi keinginanku untuk berubah itu nyata. Aku ingin jadi versi yang lebih baik, pria yang pantas bahkan sebagai pasanganmu.
                        </p>

                        <p>
                            Aku nggak minta jawaban instan atau janji manis sekarang. Aku cuma minta satu kesempatan buat membuktikan keseriusan dan perubahanku ini ke kamu. Boleh?
                        </p>

                    </div>
                    
                    <button type="button" onclick="nextStep(3)" class="w-full bg-rose-500 hover:bg-rose-600 text-white font-bold py-3 rounded-xl shadow-lg animate-bounce transition-all">
                        Lanjut Games! â¡ï¸
                    </button>
                </div>
            </div>      

            <div id="step3" class="step hidden-step fade-in">
                <h2 class="text-2xl font-bold text-gray-700 mb-2 text-center">Seberapa Tau Aku? ğŸ§</h2>
                <div id="quizContainer" class="mt-4">
                    <img id="quizImg" src="" class="w-full h-40 object-cover rounded-xl mb-4 shadow-sm">
                    <h3 id="quizQuestion" class="font-semibold text-lg text-gray-800 mb-3">Pertanyaan</h3>
                    <div id="quizOptions" class="grid grid-cols-2 gap-3"></div>
                </div>
                <div id="quizResult" class="hidden mt-4 text-center">
                    <p id="quizMsg" class="font-bold text-lg mb-4"></p>
                    <button type="button" id="btnLanjutQuiz" onclick="nextStep(4)" class="bg-green-500 text-white px-6 py-2 rounded-full hidden">Lanjut â¡ï¸</button>
                    <button type="button" id="btnRestartQuiz" onclick="restartQuiz()" class="bg-gray-400 text-white px-6 py-2 rounded-full hidden">Ulangi ğŸ”„</button>
                </div>
                <input type="hidden" name="Quiz_Score" id="quizScoreData">
            </div>

            <div id="step4" class="step hidden-step fade-in">
                <h2 class="text-3xl font-hand text-rose-600 text-center mb-6">Satu Pertanyaan Penting...</h2>
                <p class="text-center text-gray-600 text-lg mb-8">Apakah kita bisa nge-Date? ğŸŒ¹</p>
                
                <div class="flex justify-center gap-4 mb-6 transition-all" id="dateButtons">
                    <button type="button" onclick="showDateOptions(true)" class="bg-rose-500 hover:bg-rose-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition">YESS BISA! ğŸ˜</button>
                    <button type="button" onclick="showDateOptions(false)" class="bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold py-3 px-6 rounded-full">Umm No(?)</button>
                </div>

                <div id="dateYes" class="hidden space-y-3 animate-slideIn">
                    <div class="flex justify-between items-center mb-2">
                        <p class="text-gray-700 font-semibold">Yeay! Kapan nih?</p>
                        <button type="button" onclick="resetDateOptions()" class="text-xs text-rose-400 hover:text-rose-600 underline">Ubah Jawaban</button>
                    </div>

                    <label class="flex items-center p-3 border border-rose-200 rounded-lg cursor-pointer hover:bg-rose-50 transition">
                        <input type="radio" name="Date_Plan" value="Minggu Awal Maret" class="text-rose-500 focus:ring-rose-400">
                        <span class="ml-2 text-gray-700">Minggu Awal Maret ğŸ—“ï¸</span>
                    </label>
                    <label class="flex items-center p-3 border border-rose-200 rounded-lg cursor-pointer hover:bg-rose-50 transition">
                        <input type="radio" name="Date_Plan" value="Setelah Lebaran" class="text-rose-500 focus:ring-rose-400">
                        <span class="ml-2 text-gray-700">Setelah Lebaran ğŸ•Œ</span>
                    </label>
                    <div class="p-3 border border-rose-200 rounded-lg hover:bg-rose-50 transition">
                        <label class="block text-sm text-gray-600 mb-1">Pilih Tanggal Lain (Bukan Februari ini)</label>
                        <input type="date" name="Date_Manual" id="manualDate" class="w-full px-2 py-1 rounded border-gray-300 outline-none text-sm">
                    </div>
                    <button type="button" onclick="nextStep(5)" class="w-full bg-rose-500 hover:bg-rose-600 text-white font-bold py-3 rounded-xl mt-4 shadow-md transition transform active:scale-95">Lanjut ke Final! ğŸš€</button>
                </div>

                <div id="dateNo" class="hidden mt-4 animate-slideIn">
                    <div class="flex justify-between items-center mb-2">
                        <label class="block text-sm font-semibold text-gray-700">Kenapa?? ğŸ¥º</label>
                        <button type="button" onclick="resetDateOptions()" class="text-xs text-gray-400 hover:text-gray-600 underline">Ubah Jawaban</button>
                    </div>
                    
                    <textarea name="Reason_No_Date" class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-gray-400 outline-none transition" placeholder="Jelasin alasannya..."></textarea>
                    <button type="button" onclick="nextStep(5)" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-xl mt-4 shadow-md transition transform active:scale-95">Lanjut deh...</button>
                </div>
            </div>

            <div id="step5" class="step hidden-step fade-in text-center">
                <div class="relative h-96 flex flex-col justify-center items-center">
                    <h1 class="text-4xl font-hand text-rose-600 mb-8 font-bold">Do you love me? â¤ï¸</h1>
                    <div class="relative w-full h-40 flex justify-center items-center gap-6">
                        <button type="button" id="btnYesFinal" onclick="finishForm()" class="absolute z-20 bg-pink-500 hover:bg-pink-600 text-white text-xl font-bold py-3 px-10 rounded-full shadow-xl transition-all duration-300">YES!</button>
                        <button type="button" id="btnNoFinal" onclick="pencetNoFinal()" class="absolute left-3/4 bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold py-3 px-6 rounded-full transition-all duration-200">No</button>
                    </div>
                    <p id="msgNoFinal" class="mt-20 text-red-500 font-semibold h-6"></p>
                </div>
            </div>

            <div id="stepSuccess" class="step hidden-step fade-in text-center">
                <h1 class="text-4xl font-hand text-pink-600 mb-4 animate-bounce">YESSS I LOVE YOU TOO ğŸ’–ğŸ¥°</h1>
                <img src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif" class="w-full rounded-xl shadow-lg mb-4">
                <p class="text-gray-600">Jawaban kamu udah terkirim. Tunggu kabar dari aku ya!</p>
            </div>

        </div>
    </form>

    <script>
        // --- DATA & CONFIG ---
        let wrongNameCount = 0;
        const correctName = "Sisca Frecilia";
        const correctDate = "2006-09-20";
        let onModalClose = null; 

        // --- CUSTOM MODAL FUNCTIONS ---
        function showPopup(title, message, callback = null) {
            document.getElementById('modalTitle').innerText = title;
            document.getElementById('modalMessage').innerText = message;
            document.getElementById('customModal').classList.remove('hidden');
            onModalClose = callback;
        }

        function closeModal() {
            document.getElementById('customModal').classList.add('hidden');
            if (onModalClose) {
                const cb = onModalClose;
                onModalClose = null; 
                cb(); 
            }
        }

        // --- LOGIC TAHAP 1 (VERIFIKASI) ---
        function validateStep1() {
            const nameInput = document.getElementById('inputNama');
            const dateInput = document.getElementById('inputLahir');
            const finalNameField = document.getElementById('finalNameData');
            const finalBirthField = document.getElementById('finalBirthData');

            // 1. Cek Nama
            if (nameInput.value !== correctName) {
                wrongNameCount++;
                if (wrongNameCount >= 3) {
                    showPopup("Kelamaan!", "Aku anggap kamu Kucing Alien Hijau ğŸ‘½", () => {
                        nameInput.value = "Kucing Alien Hijau";
                        nameInput.readOnly = true;
                        finalNameField.value = "Kucing Alien Hijau";
                        // Lanjut cek tanggal tanpa pindah halaman
                    });
                    return; 
                } else {
                    showPopup("Hmm...", `Eh ini beneran kamu? Kok salah? (Sisa percobaan: ${3 - wrongNameCount})`);
                    return; 
                }
            } else {
                finalNameField.value = nameInput.value;
            }

            // 2. Cek Tanggal
            if (dateInput.value !== correctDate) {
                showPopup("Salah Tanggal!", "Ups tanggalnya salah (atau belum diisi), sini aku bantu isi yang bener ya ğŸ˜‹", () => {
                    dateInput.value = correctDate;
                    dateInput.readOnly = true;
                    finalBirthField.value = correctDate;
                    // TIDAK panggil loginSuccess() agar user melihat perubahan dulu
                });
            } else {
                finalBirthField.value = dateInput.value;
                loginSuccess(finalNameField.value, dateInput.value);
            }
        }

        function loginSuccess(name, dateStr) {
            document.getElementById('userProfile').classList.remove('hidden');
            document.getElementById('dispNama').innerText = name;
            const year = dateStr.split('-')[0];
            document.getElementById('dispLahir').innerText = `Lahir: ${year}`;
            setTimeout(() => nextStep(2), 500);
        }

        // --- LOGIC TAHAP 2 (CERITA) ---
        function revealMyMessage() {
            const memInput = document.getElementById('inputMemory');
            if (memInput.value.trim() === "") {
                showPopup("Kosong?", "Isi dulu dong ceritanya, masa kosong ğŸ¥º");
                return;
            }
            memInput.readOnly = true;
            memInput.classList.add('bg-gray-100', 'text-gray-500');
            
            const msgDiv = document.getElementById('part2Message');
            msgDiv.classList.remove('hidden');
            setTimeout(() => {
                msgDiv.classList.remove('opacity-0', 'translate-y-4');
            }, 100);
            event.target.style.display = 'none';
        }

        // --- SCRIPT UTILITY LAINNYA ---
        function nextStep(stepParams) {
            document.querySelectorAll('.step').forEach(el => el.classList.add('hidden-step'));
            document.getElementById(`step${stepParams}`).classList.remove('hidden-step');
            
            // Scroll ke atas setiap ganti halaman (PENTING untuk halaman scrollable)
            document.querySelector('.custom-scrollbar').scrollTop = 0;
        }

        // LOGIC QUIZ
        const questions = [
            { q: "Mana tempat fav ku?", img: "https://images.unsplash.com/photo-1509042239860-f550ce710b93?auto=format&fit=crop&w=600&q=80", correct: "Coffee Shop", options: ["Taman Kota", "Mall", "Coffee Shop", "Perpustakaan"] },
            { q: "Minuman fav ku?", img: "https://images.unsplash.com/photo-1497935586351-b67a49e012bf?auto=format&fit=crop&w=600&q=80", correct: "Coffee", options: ["Tea", "Coffee", "Boba", "Matcha"] },
            { q: "Warna fav ku?", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSLKsE_yMT8VNqmIWzd8JlBKfIJclORRBYdng&s", correct: "Palette Earth Tone", options: ["Neon Pink", "Hitam Gelap", "Palette Earth Tone", "Biru Langit"] },
            { q: "Cuaca fav ku?", img: "https://images.unsplash.com/photo-1515694346937-94d85e41e6f0?auto=format&fit=crop&w=600&q=80", correct: "After the rain", options: ["Panas Terik", "Badai Petir", "After the rain", "Salju"] },
            { q: "Bunga Fav ku?", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTZ2XQ4q65B0Mi97JeWc8GWRxruWzZc0qETfQ&s", correct: "Primrose", options: ["Mawar", "Melati", "Primrose", "Anggrek"] }
        ];

        let currentQ = 0;
        let score = 0;

        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.target.id === 'step3' && !mutation.target.classList.contains('hidden-step')) {
                   loadQuestion();
                }
            });
        });
        observer.observe(document.getElementById('step3'), { attributes: true });

        function loadQuestion() {
            const q = questions[currentQ];
            document.getElementById('quizImg').src = q.img;
            document.getElementById('quizQuestion').innerText = `${currentQ + 1}. ${q.q}`;
            const optsDiv = document.getElementById('quizOptions');
            optsDiv.innerHTML = "";
            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.innerText = opt;
                btn.className = "bg-rose-100 hover:bg-rose-200 text-rose-800 py-2 rounded-lg text-sm transition";
                btn.onclick = () => checkAnswer(opt);
                btn.type = "button";
                optsDiv.appendChild(btn);
            });
        }

        function checkAnswer(ans) {
            if (ans === questions[currentQ].correct) score++;
            currentQ++;
            if (currentQ < questions.length) {
                loadQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            document.getElementById('quizContainer').classList.add('hidden');
            const resDiv = document.getElementById('quizResult');
            const msg = document.getElementById('quizMsg');
            const btnLanjut = document.getElementById('btnLanjutQuiz');
            const btnRestart = document.getElementById('btnRestartQuiz');
            
            resDiv.classList.remove('hidden');
            document.getElementById('quizScoreData').value = `${score}/${questions.length}`;

            if (score === questions.length) {
                msg.innerText = "WAH KAMU KENAL AKU BANGET! ğŸ’¯";
                msg.className = "text-green-600 font-bold text-xl";
                btnLanjut.classList.remove('hidden');
                setTimeout(() => nextStep(4), 2000);
            } else {
                msg.innerText = "Eummm ada yang salah, tapi gapapa kok mungkin kamu lupa ğŸ¥º";
                msg.className = "text-orange-500 font-bold text-lg";
                btnLanjut.classList.remove('hidden'); 
                btnRestart.classList.remove('hidden');
            }
        }

        function restartQuiz() {
            currentQ = 0;
            score = 0;
            document.getElementById('quizContainer').classList.remove('hidden');
            document.getElementById('quizResult').classList.add('hidden');
            loadQuestion();
        }

         // --- LOGIC TAHAP 4 (DATE) ---
        function showDateOptions(isYes) {
            // Sembunyikan tombol pilihan awal
            document.getElementById('dateButtons').classList.add('hidden');
            
            // Reset tampilan form dulu biar bersih
            document.getElementById('dateYes').classList.add('hidden');
            document.getElementById('dateNo').classList.add('hidden');

            if (isYes) {
                document.getElementById('dateYes').classList.remove('hidden');
                // Set min date manual
                const today = new Date();
                const year = today.getFullYear();
                document.getElementById('manualDate').min = `${year}-03-01`;
            } else {
                document.getElementById('dateNo').classList.remove('hidden');
            }
        }

        function resetDateOptions() {
            // Sembunyikan form isian
            document.getElementById('dateYes').classList.add('hidden');
            document.getElementById('dateNo').classList.add('hidden');
            
            // Munculkan kembali tombol pilihan awal dengan animasi fade-in
            const btnContainer = document.getElementById('dateButtons');
            btnContainer.classList.remove('hidden');
            btnContainer.classList.add('fade-in'); 
            
            // Hapus class fade-in setelah animasi selesai agar tidak glitch saat di-klik lagi
            setTimeout(() => {
                btnContainer.classList.remove('fade-in');
            }, 500);
        }

        const msgsNo = ["Kenapaa??", "Ah yang bener?", "Kenapa engga?", "Kamu yakin?????", "Please...", "Jahat banget ğŸ˜­"];
        let msgIdx = 0;
        let scale = 1;

        function pencetNoFinal() {
            const btnYes = document.getElementById('btnYesFinal');
            const msgArea = document.getElementById('msgNoFinal');
            
            if (msgIdx < msgsNo.length) {
                msgArea.innerText = msgsNo[msgIdx];
                msgIdx++;
            } else {
                msgArea.innerText = "Hapus tombol No...";
                document.getElementById('btnNoFinal').style.display = 'none';
            }

            scale += 0.5;
            btnYes.style.transform = `scale(${scale})`;
            if(scale > 4) btnYes.style.zIndex = "100";
        }

        function createHearts() {
            const heart = document.createElement('div');
            heart.innerHTML = "â¤ï¸";
            heart.classList.add('float-heart');
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.animationDuration = Math.random() * 2 + 3 + "s";
            document.body.appendChild(heart);
            setTimeout(() => { heart.remove(); }, 5000);
        }

        function finishForm() {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            setInterval(createHearts, 300);
            document.querySelectorAll('.step').forEach(el => el.classList.add('hidden-step'));
            document.getElementById('stepSuccess').classList.remove('hidden-step');

            const form = document.getElementById('mainForm');
            const formData = new FormData(form);
            fetch(form.action, { method: 'POST', body: formData, headers: { 'Accept': 'application/json' } })
                .then(response => console.log("Form dikirim!"))
                .catch(error => console.log("Error internet, tapi animasi tetap jalan"));
        }
    </script>
</body>
</html>